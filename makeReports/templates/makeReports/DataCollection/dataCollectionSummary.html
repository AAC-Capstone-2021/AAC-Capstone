{% extends 'form_entry_base.html' %}
{% load bootstrap4 %}
{% block inner_content %}
<h3>Data Collection and Analysis Summary</h3>
<div class="container" style="max-width: 95%;">
 <div class="row">
     <div class="col">
         <h4>Data Table</h4>
<table class="table">
    <tbody>
        <tr>
            <td>Measure</td>
            <td>Data Collection Date Range</td>
            <td>Number of Students Assessed</td>
            <td>Percentage of Students Who Met/<br>Exceeded Threshold Proficiency</td>
            <td>Aggregate</td>
            <td>Overall Options</td>
        </tr>
        {% for assessment in assessment_data_dict.assessments %}
        <tr>
            <td><b>SLO {{assessment.slo_obj.number}}: </b>{{assessment.slo_text|safe}}
                <b>Measure {{assessment.assessment_obj.number}}: </b>{{assessment.assessment_text}}</td>
            <td style="width: 20%">
                {% for d in assessment.assess_data %}
                <p>
                    {{d.dataRange}}
                </p>
                {% endfor %}
            </td>
            <td>{% for d in assessment.assess_data %}
                    <p>
                        {{d.numberStudents}}
                    </p>
                    {% endfor %}
            </td>
            <td>{% for d in assessment.assess_data %}
                    <p>
                        {{d.overallProficient}}%
                    </p>
                    {% endfor %}
                
            </td>
            <td>
                {% if assessment.agg %}
                {{assessment.agg}}%
                {% endif %}
            </td>
            <td>
                    <a type="button" class="btn btn-primary" href="{% url 'makeReports:add-data-collection' report=rpt.pk assessment=assessment.assessment_id %}"> Add Assessment Data</a>
                    {% if assessment.agg %}
                        <a type="button" class="btn btn-primary" href="{% url 'makeReports:data-agg-edit' report=rpt.pk assessment=assessment.assessment_id pk=assessment.agg.pk %}"> Edit Assessment Aggregate</a>
                    {% else %}
                        <a type="button" class="btn btn-primary" href="{% url 'makeReports:data-agg-create' report=rpt.pk assessment=assessment.assessment_id %}"> Add Assessment Aggregate</a>
                    {% endif %}    
                    {% for d in assessment.assess_data %}
                    <a type="button" title="Edit data for measure" class="btn btn-primary" href="{% url 'makeReports:edit-data-collection' report=rpt.pk dataCollection=d.pk%}">Edit</a>
                    <a type="button" title="Delete data for measure" class="btn btn-primary" href="{% url 'makeReports:delete-data-collection' report=rpt.pk pk=d.pk %}">Delete</a>
                {% endfor %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<h4>Supplements</h4>
<a type="button" title="Continue" class="btn btn-primary" href="{% url 'makeReports:add-data-sup' report=rpt.pk %}">Add Supplement</a>
<table class="table">
    <tbody>
        <tr>
            <td>Supplement</td><td>Comment</td><td>Options</td>
        </tr>
        {% for sup in supplement_list %}
        <tr>
            <td>
                <a href="{{sup.supplement.url}}">{{sup}}</a>
            </td>
            <td>
                {{sup.comment}}
            </td>
            <td>
                    <a type="button" title="Continue" class="btn btn-primary" href="{% url 'makeReports:update-data-sup' pk=sup.pk report=rpt.pk %}">Edit Comment</a>
                    <a type="button" title="Continue" class="btn btn-primary" href="{% url 'makeReports:delete-data-sup' pk=sup.pk report=rpt.pk %}">Delete Supplement</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<table class="table">
    <tbody>
        <thead>
            <h4>SLO Status</h4>
        </thead>
        <tr>
            <td>SLO</td>
            <td>Status</td>
            <td>Options</td>
        </tr>
        {% for slo_status in assessment_data_dict.slo_statuses %}
            <tr>
                <td>SLO {{slo_status.slo_obj.number}}: {{ slo_status.slo_text|safe }}</td>
                {% if slo_status.slo_status_pk == None %}
                    <td>(Status Not Reported)</td>
                    <td>
                        <a type="button" title="Edit Status" class="btn btn-primary" href="{% url 'makeReports:add-slo-status' report=rpt.pk slopk=slo_status.slo_pk %}">Edit</a>
                    </td>
                {% else %}
                    <td>{{ slo_status.slo_status }}</td>
                    <td>
                        <a type="button" title="Edit Status" class="btn btn-primary" href="{% url 'makeReports:edit-slo-status' report=rpt.pk slopk=slo_status.slo_pk statuspk=slo_status.slo_status_pk %}">Edit</a>
                    </td>
                {% endif %}
            </tr>
        {% endfor %}
    </tbody>
</table>
<table class='table'>
    <thead>
        <h4>Describe how results are communicated within the program</h4>
    </thead>
    <tbody>
        <tr>
            <td>Text</td> <td>Options</td>
        </tr>
        <tr>
            {% if assessment_data_dict.result_communication_id == None %}
                <td>Describe how results are communicated within the program. Address each SLO.</td>
                <td>
                    <a type="button" title="Add Result Communication" class="btn btn-primary" href="{% url 'makeReports:add-result-communication' report=rpt.pk %}">Edit</a>
                </td>
            {% else %}
                <td>{{ assessment_data_dict.result_communication_text|safe }}</td>
                <td>
                    <a type="button" title="Edit Result Communication" class="btn btn-primary" href="{% url 'makeReports:edit-result-communication' report=rpt.pk resultpk=assessment_data_dict.result_communication_id %}">Edit</a>
                </td>
            {% endif %}
        </tr>
    </tbody>
</table>
</div>
 </div>
<!--<div class="col-3">
        <h4>Section III.</h4>
        1. Data Collection<br>
        2. <a href="{% url 'makeReports:data-comment' report=rpt.pk %}">Additional Comments</a>
    </div>
</div>-->
<div class="row mt-5">
    <div class="col-7">
        <h4>Additional Comments</h4>
        {{rpt.section3Comment|safe}}
    </div>
    <div class="col-2">
            <a type="button" class="btn btn-primary" href="{% url 'makeReports:data-comment' report=rpt.pk %}">Edit</a>
    </div>
</div>
<div class="row mt-5"><div class="col">
<a type="button" title="Continue" class="btn btn-primary" href="{% url 'makeReports:decisions-actions-summary' report=rpt.pk %}">Next</a>
</div>
</div>
{% endblock %}